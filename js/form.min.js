function createForms(){createDemoForm(_DEMOGRAPHICS_);createForm(_CALCULATOR_);createEmailForm(_EMAIL_)}function createForm(n){var r=n.inputs;var i=n.buttons;var s=$("<form />").attr("class","form-horizontal");for(t in r){var o,u,a,f,l,c;if(r[t].header){l=createLegend(r[t])}f=createFieldset(l);s.append(f);for(e in r[t].inputs){c=r[t].inputs[e];ctrlGrp=createFormRow(c);f.append(ctrlGrp);if(r[t].inputs[e].inputs){for(q in r[t].inputs[e].inputs){c=r[t].inputs[e].inputs[q];ctrlGrp=createFormRow(c);if(q==0){var h=$("<div />").attr("class","wrapper well well-small")}h.append(ctrlGrp);if(q==r[t].inputs[e].inputs.length-1){f.append(h)}}}}createFormBlock(r[t])}if(i){createFormButton(i[0]).appendTo(s)}s.appendTo("#calculator");calculateFields()}function createDemoForm(t){var n,r,i,s,o,u,a,f;j=t;f=$("<form />").attr("class","demographics");o=createLegend(j);s=createFieldset(o);f.append(s);for(e in j.inputs){u=j.inputs[e];n=createLabel(u);r=createDropdown(u);i=createControls(u,r);ctrlGrp=createControlGroup(u,i,n);s.append(ctrlGrp)}f.appendTo("#demographics-form-block")}function createEmailForm(t){var n,r,i,s,o,u,a,f;j=t.form;f=$("<form />").attr("class","form-horizontal email");$("#myModalLabel").text(j.header);for(e in j.inputs){u=j.inputs[e];if(u.options){r=createDropdown(u)}else{r=createInput(u,n)}if(u.type=="check"){r.prop("checked",true);n=createLabel(u);i=createControls(u,r);ctrlGrp=createControlGroup(u,i,n);r.appendTo(n);n.appendTo(i)}else{n=createLabel(u);i=createControls(u,r);ctrlGrp=createControlGroup(u,i,n)}ctrlGrp.appendTo(f)}if(j.buttons){createFormButton(j.buttons[1]).appendTo($(".modal-footer"));createFormButton(j.buttons[0]).appendTo($("#results-email-block"))}f.appendTo(".modal-body")}function createFormBlock(t){var n=t;var r=createFieldset();for(e in n.inputs){r.append(createFormRow(n.inputs[e]));if(n.inputs[e].inputs){createFormBlock(n.inputs[e])}}}function createFormRow(e){var t=e;var n,r,i,s;n=createLabel(t);r=createInput(t,n);i=createControls(t,r);s=createControlGroup(t,i,n);return s}function createFieldset(e){var t=e;var n=$("<fieldset />");if(t){t.appendTo(n)}return n}function createLegend(e){var t=e;var n=$("<legend />");n.text(t.header);return n}function createControlGroup(e,t,n){var r=e;var i=n;var s=t;var o=$("<div />").attr({id:r.id,"class":"control-group"});i.appendTo(o);s.appendTo(o);return o}function createLabel(e){var t=e;var n=$("<label />");var r=$("<i />");switch(t.type){case"text":n=n.attr("class","control-label");break;case"check":n=n.attr("class","checkbox");break;case"radio":n=n.attr("class","radio");break;case"email":n=n.attr("class","control-label")}n.text(t.label);if(t.helptext){r=createInfoIcon(r,t).appendTo(n)}return n}function createInfoIcon(e,t){var n=t;var r=$("<div />").attr("class","info-wrapper");e.attr({"class":"info-icon","data-content":n.helptext,"data-placement":"top","data-trigger":"hover","data-delay":200});e.appendTo(r);e.popover();return r}function createControls(e,t){var n=e;var r=$("<div />").attr("class","controls");if(n.helptext){createHelpText(n).appendTo(r)}t.appendTo(r);if(n.inputs){createEditIcon().appendTo(r)}return r}function createEditIcon(){var e=$("<div />").attr("class","pencil-wrapper").wrapInner($("<i />").attr("class","icon-pencil icon-white"));e.click(function(){var e=$(this).parent().parent().next();e.slideToggle("slow")});return e}function createInput(e,t){var n=e;var r=t;var i;switch(n.type){case"text":i=$("<input />").val(n.defaultvalue).attr("type","text");break;case"check":i=$("<input />").attr("type","checkbox");break;case"radio":i=$("<input />").attr("type","radio");break;case"email":i=$("<input />").attr("type","email")}if(n.pattern){i.attr("pattern",n.pattern)}if(n.title){i.attr("title",n.title)}if(n.inputs){i.attr("disabled","disabled")}if(n.unit){i=createPrependAppend(i,n.unit)}calcInpEvents(i,n.id);return i}function createDropdown(e){var t=e;var n=t.id;var r=$("<select />");var i=0;for(opt in t.options){var s=i++;$("<option />",{value:s,text:t.options[opt]}).appendTo(r)}$(r).prop("selectedIndex",t.defaultvalue);return r}function createPrependAppend(e,t){var n=t;var r=e;var i=$("<span />").attr("class","add-on");var s=$("<div />");if(n.prepend){s.attr("class","input-prepend");i.text(n.prepend);s.append(i);e=s.append(e)}if(n.append){s.attr("class","input-append");i.text(n.append);s.append(e);e=s.append(i)}return e}function createHelpText(e){var t=e;var n=$("<span />").text(t.helptext).attr("class","help-block");return n}function createFormButton(e){var t=e;var n=$("<input />");n.attr({type:"button",id:t.id,"class":t["class"],value:t.value});if(t.data_dismiss){n.attr("data-dismiss",t.data_dismiss)}if(t.href){n.attr("href",t.href)}if(t.data_toggle){n.attr("data-toggle",t.data_toggle)}if(t.id=="calculator-btn"){n.on("click",function(e){if($("#j select").val()=="0"||$("#k select").val()=="0"||$("#l select").val()=="0"){checkDemographicQs()}else{$("#summary").fadeTo(500,0,function(){$("#calculator").animate({left:"45px"},function(){$("#results").css("visibility","visible");$("#results").fadeTo(500,1);n.val(_CALCULATOR_.buttons[0].value_alt)})});n.off("click");n.on("click",function(){resetCalculator()})}})}if(t.id=="send-email-btn"){n.click(function(){sendEmail()})}return n}function calcInpEvents(e,t){var n;var t=t;if(e.attr("pattern")){n=e}else{n=e.find("input")}n.keyup(function(){if(n.val().search(new RegExp(n.attr("pattern")))!==-1){n.removeClass("invalid");if(t=="a"&&n.val()==0){n.addClass("invalid")}}else{n.addClass("invalid")}});n.change(function(){if(n.val()==""){n.val(0)}if(!n.hasClass("invalid")){if(t=="b1"){calcB()}if(t=="c1"||t=="c2"||t=="c3"){calcC()}if(t=="a"||t=="g3"){calcG()}if(t=="g1"){calcG3()}drawGoogle(googleTable(),"table","results-table-block");drawGoogle(googleLineChart(),"line","results-graph-block")}})}