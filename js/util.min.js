function getPercent(e){var t=parseFloat(e).toFixed(2);t=t/100;return t}function getCurrency(e){var t=parseFloat(e).toFixed(2);return t}function getSavings(e,t){var n=Number(e)-Number(t);return n}function addCommas(e){e+="";x=e.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var t=/(\d+)(\d{3})/;while(t.test(x1)){x1=x1.replace(t,"$1"+","+"$2")}return x1+x2}function formatUSDCurrency(e,t){var n=0;var r=0;var i=0;var s=0;e=e.toString().replace(/\$|\,/g,"");if(isNaN(e)){e="0"}if(isNaN(t)){t="2"}sign=e==(e=Math.abs(e));e=Math.roundTo(e,t).toString();e=addCommas(e);return(sign?"":"-")+"$"+e}function suppressLeadingZeroes(e){return e.replace(/^[0]+/g,"")}function sendEmail(){if($(".email input").hasClass("invalid")||$("#m input").val()==""||$("#p input").val()==""){createAlert("alert-error",_EMAIL_.form.form_error)}else{addContentTo_PDF_();getUserEmailData();if($.browser.msie&&window.XDomainRequest){var e=new XDomainRequest;e.open("POST","http://www.ibmcmostudy.com/1261/create_pdf/PDFEmail_IE.php");e.onprogress=function(){};e.ontimeout=function(){createAlert("alert-info",_EMAIL_.form.post_error)};e.onerror=function(){createAlert("alert-info",_EMAIL_.form.post_error)};e.onload=function(){var e=_EMAIL_.form.success.text1+"<strong>"+_EMAIL_.form.success.bold+"</strong>"+_EMAIL_.form.success.text2;createAlert("alert-info",e)};e.send("data="+escape(JSON.stringify(_PDF_))+"&email_data="+escape(JSON.stringify(_EMAIL_)))}else{$.when($.ajax({type:"POST",url:"http://www.ibmcmostudy.com/1261/create_pdf/PDFEmail_good.php",data:{data:JSON.stringify(_PDF_),email_data:JSON.stringify(_EMAIL_)}})).then(function(e){var t=_EMAIL_.form.success.text1+"<strong>"+_EMAIL_.form.success.bold+"</strong>"+_EMAIL_.form.success.text2;createAlert("alert-info",t)}).fail(function(e){createAlert("alert-info",_EMAIL_.form.post_error)})}}}function addContentTo_PDF_(){_PDF_.section[1].tables.calculator=getCalcData();_PDF_.section[2].tables.table1=googleCostTable(true);_PDF_.section[2].tables.table2=googleSymCostTable(true);_PDF_.section[2].tables.table3=googleTable(true);_PDF_.section[4].figure1=googleLineChart(true);addDynamicValuesTo_PDF_()}function getCalcData(){var e=_CALCULATOR_.inputs;for(x in e){for(y in e[x].inputs){var t="#"+e[x].inputs[y].id+" input";e[x].inputs[y].value=$(t).val();delete e[x].inputs[y].pattern;delete e[x].inputs[y].defaultvalue;delete e[x].inputs[y].helptext;delete e[x].inputs[y].title;delete e[x].inputs[y].type;if(e[x].inputs[y].inputs){for(z in e[x].inputs[y].inputs){t="#"+e[x].inputs[y].inputs[z].id+" input";e[x].inputs[y].inputs[z].value=$(t).val();delete e[x].inputs[y].inputs[z].pattern;delete e[x].inputs[y].inputs[z].defaultvalue;delete e[x].inputs[y].inputs[z].helptext;delete e[x].inputs[y].inputs[z].title;delete e[x].inputs[y].inputs[z].type}}}}return e}function getUserEmailData(){var e=_EMAIL_.form.inputs;for(x in e){var t="#"+e[x].id+" .controls input";if(x==4){e[x].value=$(t).prop("checked")}else{e[x].value=$(t).val()}}}function setGlobals(e){_CALCULATOR_=e.calculator;_ASSUMPTIONS_=e.assumptions;_CONTENT_=e.text_content;_CHARTS_=e.charts;_DEMOGRAPHICS_=e.demographics;_EMAIL_=e.email}function resetCalculator(){var e=_CALCULATOR_.inputs;for(x in e){for(y in e[x].inputs){var t="#"+e[x].inputs[y].id+" input";$(t).val(e[x].inputs[y].defaultvalue);if(e[x].inputs[y].inputs){for(z in e[x].inputs[y].inputs){t="#"+e[x].inputs[y].inputs[z].id+" input";$(t).val(e[x].inputs[y].inputs[z].defaultvalue)}}}}calculateFields();drawGoogle(googleTable(),"table","results-table-block");drawGoogle(googleLineChart(),"line","results-graph-block")}function checkDemographicQs(){$(".demographics select").each(function(e){if($(this).val()==0){$(this).addClass("invalid");$(this).change(function(){checkDemographicQs()})}else{$(this).removeClass("invalid")}})}function createAlert(e,t){var n=$("<p />");var r=$("<div />").attr("class","alert");if($(".modal-body .alert")){$(".modal-body .alert").remove()}r.addClass(e);n.html(t).appendTo(r);r.prependTo(".modal-body")}function updateSavingsValue(e,t){e.text(t)}function addDynamicValuesTo_PDF_(){_PDF_.section[2].paragraphs[2]=variableValueReplace(_PDF_.section[2].paragraphs[2],getOverallSavings());_PDF_.section[3].section[0].paragraphs[1]=variableValueReplace(_PDF_.section[3].section[0].paragraphs[1],$("#h input").val()+$("#h .add-on").text());_PDF_.section[4].paragraphs[0]=variableValueReplace(_PDF_.section[4].paragraphs[0],getOverallSavings());_PDF_.section[3].section[4].paragraphs[0]=variableValueReplace(_PDF_.section[3].section[4].paragraphs[0],$("#g3 input").val());_PDF_.section[3].section[4].paragraphs[1]=variableValueReplace(_PDF_.section[3].section[4].paragraphs[1],_ASSUMPTIONS_.assumed_gain_admin_eff_after_symphony*100+"%")}function modalReset(){$("#myModal").on("hidden",function(){$("#myModal .alert").alert("close");$("#m input").val("");$("#n input").val("");$("#o input").val("");$("#p input").val("")})}function injectContent(){var e=$("<ul />");var t=$("<h4 />");var n="<strong>"+_CONTENT_.chart.block1.bold+"</strong>"+_CONTENT_.chart.block1.regular;$("<p />").text(_CONTENT_.summary).appendTo("#summary-content-block");$("<p />").html(n).appendTo("#results-content-block");for(f in _CONTENT_.chart.list_items){$("<li />").text(_CONTENT_.chart.list_items[f]).appendTo(e)}e.appendTo("#results-content-block");$("<p />").text(_CONTENT_.chart.block2).appendTo("#results-content-block");t.html(variableValueReplace(_CONTENT_.chart.savings,getOverallSavings(),true)).appendTo("#results-table-summary-block");$("<h1 />").text(_CONTENT_.head).appendTo(".page-head");$("<h2 />").text(_CONTENT_.subhead).appendTo(".page-head")}function variableValueReplace(e,t,n){var r;if(n){r=e.replace("[value]","<strong>"+t[x]+"</strong>")}else{r=e.replace("[value]",t)}return r}Math.roundTo=function(e,t){if(isNaN(e)){return e}else{var n=Math.pow(10,t);return Math.round(e*n)/n}}